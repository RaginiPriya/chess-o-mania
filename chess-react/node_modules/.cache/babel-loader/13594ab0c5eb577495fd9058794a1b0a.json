{"ast":null,"code":"import _objectSpread from\"/Users/ragir/Documents/chess/chess api/chess-online/chess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/ragir/Documents/chess/chess api/chess-online/chess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ragir/Documents/chess/chess api/chess-online/chess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ragir/Documents/chess/chess api/chess-online/chess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ragir/Documents/chess/chess api/chess-online/chess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import NavBar from'./NavBar';import whiteKing from'./images/white_king.png';import blackKing from'./images/black_king.png';import{Button,FormControl,InputGroup,Image}from'react-bootstrap';import{Redirect}from'react-router-dom';import{connect}from'react-redux';import questionmark from'./images/questionmark.png';import home from'./images/home.png';var WaitingGameRoom=/*#__PURE__*/function(_Component){_inherits(WaitingGameRoom,_Component);var _super=_createSuper(WaitingGameRoom);function WaitingGameRoom(props){var _this;_classCallCheck(this,WaitingGameRoom);_this=_super.call(this,props);_this.state={redirect:false,redirectToHome:false,gameId:_this.props.location.state.gameId,color:_this.props.location.state.color,opponentName:_this.props.location.state.opponentName,opponentImageUrl:_this.props.location.state.opponentImageUrl,counter:5};_this.redirectToHome=function(){_this.socket.close();_this.setState({redirectToHome:true});};_this.goToGame=function(){_this.socket.send(JSON.stringify({\"type\":\"ready\"}));_this.setState({redirect:true});};_this.copyToClipboard=function(e){_this.gameId.select();document.execCommand('copy');e.target.focus();};_this.startTimer=function(){_this.myTimer=setInterval(function(){_this.setState(function(prevState){return _objectSpread(_objectSpread({},prevState),{},{counter:prevState.counter-1});});},1000);};_this.gameId=React.createRef();return _this;}_createClass(WaitingGameRoom,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(this.state.opponentName){this.startTimer();}this.socket=this.props.socket;this.socket.onmessage=function(input){var data=JSON.parse(input.data);if(data.color){_this2.startTimer();_this2.setState({friends:true,gameId:data.gameId,opponentName:data.opponentName,opponentImageUrl:data.opponentImageUrl,color:data.color});}else if(data.type==='quit'){clearInterval(_this2.myTimer);_this2.setState({opponentName:null,opponentImageUrl:null,counter:5});}};}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/React.createElement(\"div\",null,this.state.counter===0?/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/game',state:{gameId:this.state.gameId,color:this.state.color,opponentName:this.state.opponentName,opponentImageUrl:this.state.opponentImageUrl}}}):null,this.state.redirectToHome?/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/home'}}):null,/*#__PURE__*/React.createElement(\"div\",{style:{position:'fixed',left:'2%',top:'2%'}},/*#__PURE__*/React.createElement(Image,{src:home,roundedCircle:true,width:\"100\",height:\"100\",onClick:this.redirectToHome,style:{cursor:'pointer'}})),/*#__PURE__*/React.createElement(\"div\",{className:\"waitingRoomText\"},/*#__PURE__*/React.createElement(InputGroup,{className:\"mb-3\"},/*#__PURE__*/React.createElement(FormControl,{placeholder:this.props.location.state.gameId,\"aria-label\":this.props.location.state.gameId,\"aria-describedby\":\"basic-addon2\"}),/*#__PURE__*/React.createElement(InputGroup.Append,null,/*#__PURE__*/React.createElement(Button,{variant:\"outline-secondary light\",onClick:function onClick(){navigator.clipboard.writeText(_this3.props.location.state.gameId);}},\"COPY\"))),/*#__PURE__*/React.createElement(\"h4\",{style:{marginTop:'20px',color:'rgb(192, 57, 43)',fontFamily:'Rouge Script, cursive'}},\"Share this ROOM ID with your friends and ask them to join\")),/*#__PURE__*/React.createElement(\"div\",{className:\"left-wait\"},/*#__PURE__*/React.createElement(\"div\",{className:\"image-wait\"},/*#__PURE__*/React.createElement(\"img\",{width:\"150\",height:\"150\",className:\"imageBorder\",src:this.props.user.imageUrl,alt:\"white\"}),/*#__PURE__*/React.createElement(\"h3\",{style:{marginTop:'20px',color:'rgb(192, 57, 43)',fontFamily:'Rouge Script, cursive'}},this.props.user.username))),/*#__PURE__*/React.createElement(\"div\",{className:\"right-wait\"},/*#__PURE__*/React.createElement(\"div\",{className:\"image-wait\"},/*#__PURE__*/React.createElement(\"img\",{width:\"150\",height:\"150\",className:\"imageBorder\",src:this.state.opponentImageUrl?this.state.opponentImageUrl:questionmark,alt:\"white\"}),/*#__PURE__*/React.createElement(\"h3\",{style:{marginTop:'20px',color:'rgb(192, 57, 43)',fontFamily:'Rouge Script, cursive'}},this.state.opponentName))),this.state.opponentName?/*#__PURE__*/React.createElement(\"h3\",{className:\"startText\"},\"GAME starts in \",this.state.counter):null);}}]);return WaitingGameRoom;}(Component);var mapStateToProps=function mapStateToProps(state){return{socket:state.websocketReducer.socket,user:state.userReducer};};export default connect(mapStateToProps)(WaitingGameRoom);","map":{"version":3,"sources":["/Users/ragir/Documents/chess/chess api/chess-online/chess-react/src/WaitingGameRoom.js"],"names":["React","Component","NavBar","whiteKing","blackKing","Button","FormControl","InputGroup","Image","Redirect","connect","questionmark","home","WaitingGameRoom","props","state","redirect","redirectToHome","gameId","location","color","opponentName","opponentImageUrl","counter","socket","close","setState","goToGame","send","JSON","stringify","copyToClipboard","e","select","document","execCommand","target","focus","startTimer","myTimer","setInterval","prevState","createRef","onmessage","input","data","parse","friends","type","clearInterval","pathname","position","left","top","cursor","navigator","clipboard","writeText","marginTop","fontFamily","user","imageUrl","username","mapStateToProps","websocketReducer","userReducer"],"mappings":"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","sourcesContent":["import React, {Component} from 'react'\nimport NavBar from './NavBar'\nimport whiteKing from './images/white_king.png';\nimport blackKing from './images/black_king.png'\nimport {Button, FormControl, InputGroup, Image} from 'react-bootstrap'\nimport { Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux';\nimport questionmark from './images/questionmark.png'\nimport home from './images/home.png'\n\nclass WaitingGameRoom extends Component {\n    state = {\n        redirect : false,\n        redirectToHome: false,\n        gameId: this.props.location.state.gameId,\n        color: this.props.location.state.color,\n        opponentName: this.props.location.state.opponentName,\n        opponentImageUrl: this.props.location.state.opponentImageUrl,\n        counter: 5\n    }\n\n    constructor(props){\n        super(props);\n        this.gameId = React.createRef();\n    }\n\n    redirectToHome = () => {\n        this.socket.close()\n        this.setState({redirectToHome: true})\n    }\n\n    goToGame = () => {\n        this.socket.send(JSON.stringify({\"type\":\"ready\"}))\n        this.setState({redirect: true})\n    }\n\n    componentDidMount () {\n        if(this.state.opponentName) {\n            this.startTimer()\n        }\n        this.socket = this.props.socket\n\n        this.socket.onmessage = (input) => {\n            var data = JSON.parse(input.data);\n            if(data.color) {\n                this.startTimer()\n                this.setState({ friends: true, gameId: data.gameId, opponentName: data.opponentName, opponentImageUrl: data.opponentImageUrl, color: data.color })\n            }\n            else if(data.type === 'quit'){\n                clearInterval(this.myTimer) \n                this.setState({opponentName: null, opponentImageUrl: null, counter:5})\n            }\n        }\n    }\n\n    copyToClipboard = (e) => {\n        this.gameId.select();\n        document.execCommand('copy');\n        e.target.focus();\n    };\n\n    startTimer = () => {\n        this.myTimer = setInterval(() => {\n            this.setState(prevState =>{\n                return{\n                     ...prevState,\n                     counter : prevState.counter - 1\n                }\n            })\n        }, 1000)\n    }\n\n    render () {\n        return (\n            <div>\n                { \n                    this.state.counter === 0 ? <Redirect to={{\n                        pathname: '/game',\n                        state: { \n                            gameId: this.state.gameId,\n                            color: this.state.color,\n                            opponentName: this.state.opponentName,\n                            opponentImageUrl: this.state.opponentImageUrl\n                        }\n                    }} /> :null\n                }\n\n                { \n                    this.state.redirectToHome ? <Redirect to={{\n                        pathname: '/home'\n                    }} /> :null\n                }\n                    \n                <div style={{position: 'fixed', left: '2%', top: '2%'}}>\n                    <Image src={home} roundedCircle width=\"100\" height=\"100\" onClick={this.redirectToHome} style={{cursor: 'pointer'}} />\n                </div>\n                <div className='waitingRoomText'>\n                    <InputGroup className=\"mb-3\">\n                        <FormControl\n                            placeholder={this.props.location.state.gameId}\n                            aria-label={this.props.location.state.gameId}\n                            aria-describedby=\"basic-addon2\"\n                        />\n                        <InputGroup.Append>\n                            <Button variant=\"outline-secondary light\" onClick={() => {navigator.clipboard.writeText(this.props.location.state.gameId)}}>COPY</Button>\n                        </InputGroup.Append>\n                    </InputGroup>\n                    <h4 style={{marginTop:'20px',color:'rgb(192, 57, 43)',fontFamily:'Rouge Script, cursive'}}>Share this ROOM ID with your friends and ask them to join</h4>\n                </div>\n        \n                <div className='left-wait'>\n                    <div className='image-wait'>\n                        <img width='150' height='150' className='imageBorder' src={this.props.user.imageUrl} alt=\"white\" />\n                        <h3 style={{marginTop:'20px',color:'rgb(192, 57, 43)',fontFamily:'Rouge Script, cursive'}}>{this.props.user.username}</h3>\n                    </div>\n                </div>\n\n                <div className='right-wait'>\n                    <div className='image-wait'>\n                    <img width='150' height='150' className='imageBorder' src={this.state.opponentImageUrl ? this.state.opponentImageUrl : questionmark} alt=\"white\" />\n                        <h3 style={{marginTop:'20px',color:'rgb(192, 57, 43)',fontFamily:'Rouge Script, cursive'}}>{this.state.opponentName}</h3>\n                    </div>\n                </div>\n{/* \n                {                    \n                    this.state.otherPlayerName !== null && this.props.location.state.color === 'white' ?\n                        <Button className='button' style={{\n                            marginBottom: '10vh',\n                            width: '250px',\n                            left: '40%',\n                            color: 'white',\n                            bottom: '10vh',\n                            position: 'fixed',\n                            border: '1px solid black',\n                            backgroundColor: 'grey'}} onClick={this.goToGame}>START GAME</Button>\n                        :null\n                } */}\n\n                {\n                    this.state.opponentName ?\n                        \n                        <h3 className='startText'>GAME starts in {this.state.counter}</h3>\n                        :null\n                }\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    socket: state.websocketReducer.socket,\n    user: state.userReducer\n})\n\nexport default connect(mapStateToProps)(WaitingGameRoom)"]},"metadata":{},"sourceType":"module"}