{"ast":null,"code":"var _jsxFileName = \"/Users/ragir/Documents/chess/chess-react/src/ChessGame.js\";\nimport React, { Component } from 'react';\nimport generateSquares from './generateSquares';\nimport getPieces from './getPieces';\nimport Square from './Square';\nimport Piece from './Piece';\nimport checkMove from './checkMove';\nimport { Redirect } from 'react-router-dom';\nimport { Modal, Button, Image } from 'react-bootstrap';\nimport whiteQueen from './images/white_queen.png';\nimport blackQueen from './images/black_queen.png';\nimport whiteBishop from './images/white_bishop.png';\nimport blackBishop from './images/black_bishop.png';\nimport whiteKnight from './images/white_knight.png';\nimport blackKnight from './images/black_knight.png';\nimport whiteRook from './images/white_rook.png';\nimport blackRook from './images/black_rook.png';\nimport ChessPiece from './ChessPiece';\nimport { connect } from 'react-redux';\nimport home from './images/home.png';\n\nclass ChessGame extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      kingInCheck: false,\n      kingInCheckMate: false,\n      kingInStaleMate: false,\n      willPutKingInCheck: false,\n      squares: generateSquares(this.props.location.state.color === 'white' ? false : true),\n      pieces: getPieces(),\n      myTurn: this.props.location.state.color === 'white' ? true : false,\n      showQuitModal: false,\n      redirect: false,\n      showPieceSwapModal: false,\n      pieceToSwap: null,\n      squareToSwap: null,\n      won: false,\n      draw: false,\n      gameId: this.props.location.state.gameId,\n      myPiecesCaptured: [],\n      opponentPiecesCaptured: [],\n      squareFromSwap: null\n    };\n\n    this.hide = () => {\n      this.setState({\n        showQuitModal: false,\n        showPieceSwapModal: false\n      });\n    };\n\n    this.redirect = () => {\n      this.setState({\n        redirect: true\n      });\n    };\n\n    this.listenForCheck = () => {\n      const king = this.state.squares.find(square => {\n        return square.piece && square.piece.piece === 'king' && square.piece.color === this.props.location.state.color;\n      });\n      const attackingPiece = this.state.squares.find(square => {\n        return square.piece && checkMove(square.piece, square, king.piece, king, this.state.squares);\n      });\n      return attackingPiece ? true : false;\n    };\n\n    this.isCheckMate = color => {\n      const isKingUnderAttack = this.listenForCheck();\n\n      if (isKingUnderAttack) {\n        this.setState({\n          kingInCheck: true\n        });\n      }\n\n      const mySquares = this.state.squares.filter(square => {\n        return square.piece && square.piece.color === color;\n      });\n      const hero = mySquares.find(mySquare => {\n        const destSquare = this.state.squares.find(square => {\n          const movePossible = checkMove(mySquare.piece, mySquare, square.piece, square, this.state.squares, isKingUnderAttack);\n\n          if (movePossible) {\n            var willPutInCheck = false;\n            const piece = square.piece;\n\n            if (piece) {\n              piece.row = null;\n              piece.column = null;\n            }\n\n            square.piece = mySquare.piece;\n            square.piece.row = square.row;\n            square.piece.column = square.column;\n            mySquare.piece = null;\n            const isCheck = this.listenForCheck();\n\n            if (isCheck) {\n              willPutInCheck = true;\n            }\n\n            mySquare.piece = square.piece;\n            square.piece = piece;\n            mySquare.piece.row = mySquare.row;\n            mySquare.piece.column = mySquare.column;\n\n            if (piece) {\n              piece.row = square.row;\n              piece.column = square.column;\n            }\n\n            return !willPutInCheck;\n          }\n\n          return false;\n        });\n        return destSquare ? true : false;\n      });\n\n      if (isKingUnderAttack && !hero) {\n        this.setState({\n          kingInCheckMate: true\n        });\n        this.socket.send(JSON.stringify({\n          'type': 'won',\n          gameId: this.state.gameId\n        }));\n      } else if (!isKingUnderAttack && !hero) {\n        this.setState({\n          kingInStaleMate: true\n        });\n        this.socket.send(JSON.stringify({\n          'type': 'draw',\n          gameId: this.state.gameId\n        }));\n      }\n    };\n\n    this.move = (selectedPiece, selectedSquare, piece, square) => {\n      this.setState({\n        willPutKingInCheck: false\n      });\n      const movePossible = checkMove(selectedPiece, selectedSquare, piece, square, this.state.squares, this.state.kingInCheck);\n\n      if (movePossible) {\n        square.piece = selectedPiece;\n        selectedPiece.row = square.row;\n        selectedPiece.column = square.column;\n\n        if (piece) {\n          this.state.myPiecesCaptured.push(piece.icon);\n          piece.row = null;\n          piece.column = null;\n        }\n\n        selectedSquare.piece = null;\n        const isCheck = this.listenForCheck();\n\n        if (isCheck) {\n          square.piece = piece;\n          selectedPiece.row = selectedSquare.row;\n          selectedPiece.column = selectedSquare.column;\n\n          if (piece) {\n            piece.row = square.row;\n            piece.column = square.column;\n          }\n\n          selectedSquare.piece = selectedPiece;\n          this.setState({\n            willPutKingInCheck: true\n          });\n        } else {\n          if (selectedPiece.piece === 'rook' || selectedPiece.piece === 'pawn' || selectedPiece.piece === 'king') {\n            selectedPiece.hasMoved = true;\n          }\n\n          var isCastling = false;\n\n          if (selectedSquare.isCastling) {\n            const rookSquare = this.state.squares.find(availableSquare => {\n              return availableSquare.isCastling && availableSquare.piece && availableSquare.piece.piece === 'rook';\n            });\n            const rook = rookSquare.piece;\n            const moveRookTo = this.state.squares.find(availableSquare => {\n              return availableSquare.row === rookSquare.row && availableSquare.column === (rookSquare.column === 1 ? rookSquare.column + 3 : rookSquare.column - 2);\n            });\n            moveRookTo.piece = rook;\n            rook.row = moveRookTo.row;\n            rook.column = moveRookTo.column;\n            rookSquare.piece = null;\n            rook.hasMoved = true;\n            rookSquare.isCastling = false;\n            selectedSquare.isCastling = false;\n            isCastling = true;\n          }\n\n          if (this.state.kingInCheck) {\n            this.setState({\n              kingInCheck: false\n            });\n          }\n\n          if (selectedPiece.piece === 'pawn' && square.row === (this.props.location.state.color === 'white' ? 1 : 8)) {\n            this.setState({\n              showPieceSwapModal: true,\n              squareToSwap: square,\n              squareFromSwap: selectedSquare\n            });\n          } else {\n            this.socket.send(JSON.stringify({\n              type: \"move\",\n              gameId: this.state.gameId,\n              fromSquare: {\n                row: selectedSquare.row,\n                column: selectedSquare.column\n              },\n              isCastling: isCastling,\n              toSquare: {\n                row: square.row,\n                column: square.column\n              },\n              myColor: this.props.location.state.color\n            }));\n          }\n\n          this.setState({\n            myTurn: false\n          });\n          selectedPiece.selected = false;\n          selectedSquare.selected = false;\n        }\n      }\n\n      selectedPiece.selected = false;\n      selectedSquare.selected = false;\n      this.setState(prevState => {\n        return { ...prevState\n        };\n      });\n    };\n\n    this.selectPiece = (square, piece) => {\n      square.selected = true;\n      piece.selected = true;\n      this.setState(this.state);\n    };\n\n    this.swapPiece = (pieceImage, index) => {\n      const square = this.state.squareToSwap;\n      const fromSquare = this.state.squareFromSwap;\n      const pawn = square.piece;\n      pawn.row = null;\n      pawn.column = null;\n      const pieceType = ['queen', 'bishop', 'knight', 'rook'];\n      const piece = new ChessPiece(pieceType[index], this.props.location.state.color, square.row, square.column, pieceImage);\n      square.piece = piece;\n      piece.row = square.row;\n      piece.column = square.column;\n      const pieces = this.state.pieces;\n      pieces.push(piece);\n      this.setState({\n        pieces: pieces,\n        squares: this.state.squares\n      });\n      this.hide();\n      this.socket.send(JSON.stringify({\n        type: \"swap\",\n        gameId: this.state.gameId,\n        index: index,\n        toSquare: {\n          row: square.row,\n          column: square.column\n        },\n        fromSquare: {\n          row: fromSquare.row,\n          column: fromSquare.column\n        },\n        myColor: this.props.location.state.color\n      }));\n    };\n  }\n\n  componentDidMount() {\n    // this.socket = new WebSocket(\"ws://localhost:8000/game/\"+this.props.location.state.gameId+\"?userId=\"+this.props.location.state.userId)\n    this.socket = this.props.socket;\n\n    this.socket.onmessage = input => {\n      var data = JSON.parse(input.data);\n\n      if (data.type === 'quit' && !this.state.kingInCheckMate) {\n        this.setState({\n          showQuitModal: true\n        });\n      }\n\n      if (data.type === 'swap') {\n        const {\n          index,\n          fromSquare,\n          toSquare,\n          myColor\n        } = data;\n        const opponentPieceArray = myColor === 'white' ? [whiteQueen, whiteBishop, whiteKnight, whiteRook] : [blackQueen, blackBishop, blackKnight, blackRook];\n        const pawnFromSquare = this.state.squares.find(sq => {\n          return sq.column === fromSquare.column && sq.row === fromSquare.row;\n        });\n        const pawn = pawnFromSquare.piece;\n        pawn.row = null;\n        pawn.column = null;\n        const pieceType = ['queen', 'bishop', 'knight', 'rook'];\n        const piece = new ChessPiece(pieceType[index], myColor, toSquare.row, toSquare.column, opponentPieceArray[index]);\n        const pawnToSquare = this.state.squares.find(sq => {\n          return sq.column === toSquare.column && sq.row === toSquare.row;\n        });\n        pawnToSquare.piece = piece;\n        piece.row = pawnToSquare.row;\n        piece.column = pawnToSquare.column;\n        const pieces = this.state.pieces;\n        pieces.push(piece);\n        this.setState({\n          pieces: pieces,\n          squares: this.state.squares,\n          myTurn: true\n        });\n      }\n\n      if (data.type === 'won' || data.type === 'draw') {\n        if (data.endgame === 'won') {\n          this.setState({\n            \"won\": true\n          });\n        } else if (data.endgame === 'draw') {\n          this.setState({\n            \"draw\": true\n          });\n        }\n      }\n\n      if (data.type === 'move') {\n        const {\n          fromSquare,\n          toSquare,\n          isCastling\n        } = data;\n        const from = this.state.squares.find(square => {\n          return square.row === fromSquare.row && square.column === fromSquare.column;\n        });\n        const to = this.state.squares.find(square => {\n          return square.row === toSquare.row && square.column === toSquare.column;\n        });\n\n        if (from.piece.piece === 'rook' || from.piece.piece === 'pawn' || from.piece.piece === 'king') {\n          from.piece.hasMoved = true;\n        }\n\n        if (to.piece) {\n          this.state.opponentPiecesCaptured.push(to.piece.icon);\n          to.piece.row = null;\n          to.piece.column = null;\n        }\n\n        to.piece = from.piece;\n        from.piece = null;\n        to.piece.row = to.row;\n        to.piece.column = to.column;\n\n        if (isCastling) {\n          const rookSquare = this.state.squares.find(square => {\n            return square.piece && square.piece.piece === 'rook' && square.column === (fromSquare.column > toSquare.column ? 1 : 8) && square.row === fromSquare.row;\n          });\n          const rook = rookSquare.piece;\n          const moveRookTo = this.state.squares.find(availableSquare => {\n            return availableSquare.row === rookSquare.row && availableSquare.column === (rookSquare.column === 1 ? rookSquare.column + 3 : rookSquare.column - 2);\n          });\n          moveRookTo.piece = rook;\n          rook.row = moveRookTo.row;\n          rook.column = moveRookTo.column;\n          rookSquare.piece = null;\n        }\n\n        this.setState({\n          squares: this.state.squares,\n          pieces: this.state.pieces,\n          myTurn: true\n        });\n        this.isCheckMate(this.props.location.state.color);\n      }\n    };\n  }\n\n  componentWillUnmount() {\n    // this.socket.send(JSON.stringify({\"type\":\"quit\",gameId: this.state.gameId}))\n    console.log(\"socket closed\");\n    this.socket.close();\n  }\n\n  render() {\n    const pieceArray = this.props.location.state.color === 'white' ? [whiteQueen, whiteBishop, whiteKnight, whiteRook] : [blackQueen, blackBishop, blackKnight, blackRook];\n    const myName = this.props.location.state.player2 ? this.props.location.state.userId : 'You';\n    const opponentName = this.props.location.state.player2 ? this.props.location.state.player2 : 'Opponent';\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 13\n      }\n    }, this.state.redirect ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/home\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 310,\n        columnNumber: 40\n      }\n    }) : null, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        position: 'fixed',\n        left: '2%',\n        top: '2%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: home,\n      roundedCircle: true,\n      width: \"100\",\n      height: \"100\",\n      onClick: this.redirect,\n      style: {\n        cursor: 'pointer'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 313,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: '20%',\n        position: 'fixed',\n        right: '2%',\n        top: '75%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"fieldset\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"legend\", {\n      style: {\n        width: 'auto'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: this.props.user.imageUrl,\n      roundedCircle: true,\n      width: \"60\",\n      height: \"60\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontFamily: 'Rouge Script, cursive'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 106\n      }\n    }, this.props.user.username, \" \")), this.state.myPiecesCaptured.length > 0 ? this.state.myPiecesCaptured.map(piece => {\n      return /*#__PURE__*/React.createElement(Image, {\n        src: piece,\n        roundedCircle: true,\n        width: \"30\",\n        height: \"30\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 37\n        }\n      });\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        color: 'rgba(1,1,1,0.3)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 329,\n        columnNumber: 27\n      }\n    }, \"Pieces captured\"))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        width: '20%',\n        position: 'fixed',\n        right: '2%',\n        top: '5%'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"fieldset\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"legend\", {\n      style: {\n        width: 'auto'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: this.props.location.state.opponentImageUrl,\n      roundedCircle: true,\n      width: \"60\",\n      height: \"60\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      style: {\n        fontFamily: 'Rouge Script, cursive'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 124\n      }\n    }, this.props.location.state.opponentName, \" \")), this.state.opponentPiecesCaptured.length > 0 ? this.state.opponentPiecesCaptured.map(piece => {\n      return /*#__PURE__*/React.createElement(Image, {\n        src: piece,\n        roundedCircle: true,\n        width: \"30\",\n        height: \"30\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 37\n        }\n      });\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        color: 'rgba(1,1,1,0.3)'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 27\n      }\n    }, \"Pieces captured\"))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Game\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"Board\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Square, {\n      squares: this.state.squares,\n      move: this.move,\n      pieces: this.state.pieces,\n      myTurn: this.state.myTurn,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(Piece, {\n      pieces: this.state.pieces,\n      squares: this.state.squares,\n      move: this.move,\n      selectPiece: this.selectPiece,\n      myTurn: this.state.myTurn,\n      color: this.props.location.state.color,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(Modal, {\n      backdrop: \"static\",\n      \"aria-labelledby\": \"contained-modal-title-vcenter\",\n      centered: true,\n      keyboard: false,\n      show: this.state.showQuitModal || this.state.kingInCheckMate || this.state.draw || this.state.won,\n      onHide: this.hide,\n      className: \"my-modal\",\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      hidden: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 29\n      }\n    }, 'GAME OVER!' + (this.state.showQuitModal ? ' Opponent Quit' : this.state.kingInCheckMate ? ' Your King has been captured' : this.state.draw ? ' DRAW' : ' YOU WON !!')), /*#__PURE__*/React.createElement(Button, {\n      onClick: this.redirect,\n      className: \"button\",\n      style: {\n        backgroundColor: 'black',\n        border: '1px solid black',\n        width: '150px',\n        marginTop: '20px'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 29\n      }\n    }, \"HOME\")))), /*#__PURE__*/React.createElement(Modal, {\n      backdrop: \"static\",\n      \"aria-labelledby\": \"contained-modal-title-vcenter\",\n      centered: true,\n      keyboard: false,\n      show: this.state.showPieceSwapModal,\n      onHide: this.hide,\n      className: \"my-modal\",\n      size: \"lg\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Modal.Header, {\n      closeButton: true,\n      hidden: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Modal.Body, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        textAlign: \"center\"\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 29\n      }\n    }, \"Select the piece to swap\"), pieceArray.map((piece, index) => {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          display: 'inline-block',\n          height: '20vh',\n          width: '20vh',\n          border: '3px solid black'\n        },\n        onClick: () => this.swapPiece(piece, index),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        style: {\n          height: '20vh'\n        },\n        src: piece,\n        alt: \"piece\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 419,\n          columnNumber: 45\n        }\n      }));\n    })))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  socket: state.websocketReducer.socket,\n  user: state.userReducer\n});\n\nexport default connect(mapStateToProps)(ChessGame);","map":{"version":3,"sources":["/Users/ragir/Documents/chess/chess-react/src/ChessGame.js"],"names":["React","Component","generateSquares","getPieces","Square","Piece","checkMove","Redirect","Modal","Button","Image","whiteQueen","blackQueen","whiteBishop","blackBishop","whiteKnight","blackKnight","whiteRook","blackRook","ChessPiece","connect","home","ChessGame","state","kingInCheck","kingInCheckMate","kingInStaleMate","willPutKingInCheck","squares","props","location","color","pieces","myTurn","showQuitModal","redirect","showPieceSwapModal","pieceToSwap","squareToSwap","won","draw","gameId","myPiecesCaptured","opponentPiecesCaptured","squareFromSwap","hide","setState","listenForCheck","king","find","square","piece","attackingPiece","isCheckMate","isKingUnderAttack","mySquares","filter","hero","mySquare","destSquare","movePossible","willPutInCheck","row","column","isCheck","socket","send","JSON","stringify","move","selectedPiece","selectedSquare","push","icon","hasMoved","isCastling","rookSquare","availableSquare","rook","moveRookTo","type","fromSquare","toSquare","myColor","selected","prevState","selectPiece","swapPiece","pieceImage","index","pawn","pieceType","componentDidMount","onmessage","input","data","parse","opponentPieceArray","pawnFromSquare","sq","pawnToSquare","endgame","from","to","componentWillUnmount","console","log","close","render","pieceArray","myName","player2","userId","opponentName","position","left","top","cursor","width","right","user","imageUrl","fontFamily","username","length","map","opponentImageUrl","textAlign","backgroundColor","border","marginTop","display","height","mapStateToProps","websocketReducer","userReducer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport generateSquares from './generateSquares'\nimport getPieces from './getPieces'\nimport Square from './Square'\nimport Piece from './Piece'\nimport checkMove from './checkMove'\nimport { Redirect } from 'react-router-dom';\nimport { Modal, Button, Image } from 'react-bootstrap'\nimport whiteQueen from './images/white_queen.png';\nimport blackQueen from './images/black_queen.png'\nimport whiteBishop from './images/white_bishop.png';\nimport blackBishop from './images/black_bishop.png'\nimport whiteKnight from './images/white_knight.png';\nimport blackKnight from './images/black_knight.png'\nimport whiteRook from './images/white_rook.png';\nimport blackRook from './images/black_rook.png'\nimport ChessPiece from './ChessPiece'\nimport { connect } from 'react-redux';\nimport home from './images/home.png'\n\nclass ChessGame extends Component {\n    state = {\n        kingInCheck: false,\n        kingInCheckMate: false,\n        kingInStaleMate: false,\n        willPutKingInCheck: false,\n        squares: generateSquares(this.props.location.state.color === 'white' ? false : true),\n        pieces: getPieces(),\n        myTurn: this.props.location.state.color === 'white' ? true : false,\n        showQuitModal: false,\n        redirect: false,\n        showPieceSwapModal: false,\n        pieceToSwap: null,\n        squareToSwap: null,\n        won: false,\n        draw: false,\n        gameId: this.props.location.state.gameId,\n        myPiecesCaptured: [],\n        opponentPiecesCaptured: [],\n        squareFromSwap: null\n    }\n\n    hide = () => {\n        this.setState({ showQuitModal: false, showPieceSwapModal: false })\n    }\n\n    redirect = () => {\n        this.setState({ redirect: true })\n    }\n\n    componentDidMount() {\n        // this.socket = new WebSocket(\"ws://localhost:8000/game/\"+this.props.location.state.gameId+\"?userId=\"+this.props.location.state.userId)\n        this.socket = this.props.socket\n\n        this.socket.onmessage = (input) => {\n            var data = JSON.parse(input.data)\n            if (data.type === 'quit' && !this.state.kingInCheckMate) {\n                this.setState({ showQuitModal: true })\n            }\n            if (data.type === 'swap') {\n                const { index, fromSquare, toSquare, myColor } = data\n                const opponentPieceArray = myColor === 'white' ? [whiteQueen, whiteBishop, whiteKnight, whiteRook] :\n                    [blackQueen, blackBishop, blackKnight, blackRook]\n\n                const pawnFromSquare = this.state.squares.find((sq) => { return sq.column === fromSquare.column && sq.row === fromSquare.row })\n                const pawn = pawnFromSquare.piece\n                pawn.row = null\n                pawn.column = null\n                const pieceType = ['queen', 'bishop', 'knight', 'rook']\n                const piece = new ChessPiece(pieceType[index], myColor, toSquare.row, toSquare.column, opponentPieceArray[index])\n                const pawnToSquare = this.state.squares.find((sq) => { return sq.column === toSquare.column && sq.row === toSquare.row })\n                pawnToSquare.piece = piece\n                piece.row = pawnToSquare.row\n                piece.column = pawnToSquare.column\n                const pieces = this.state.pieces\n                pieces.push(piece)\n                this.setState({ pieces: pieces, squares: this.state.squares, myTurn: true });\n\n            }\n\n            if (data.type === 'won' || data.type === 'draw') {\n                if (data.endgame === 'won') {\n                    this.setState({ \"won\": true })\n                }\n                else if (data.endgame === 'draw') {\n                    this.setState({ \"draw\": true })\n                }\n            }\n\n            if (data.type === 'move') {\n                const { fromSquare, toSquare, isCastling } = data\n                const from = this.state.squares.find((square) => {\n                    return square.row === fromSquare.row && square.column === fromSquare.column\n                })\n                const to = this.state.squares.find((square) => {\n                    return square.row === toSquare.row && square.column === toSquare.column\n                })\n                if (from.piece.piece === 'rook' || from.piece.piece === 'pawn' || from.piece.piece === 'king') {\n                    from.piece.hasMoved = true\n                }\n                if (to.piece) {\n                    this.state.opponentPiecesCaptured.push(to.piece.icon)\n                    to.piece.row = null\n                    to.piece.column = null\n                }\n                to.piece = from.piece\n                from.piece = null\n                to.piece.row = to.row\n                to.piece.column = to.column\n                if (isCastling) {\n                    const rookSquare = this.state.squares.find((square) => {\n                        return (\n                            square.piece && square.piece.piece === 'rook' &&\n                            (square.column === (fromSquare.column > toSquare.column ? 1 : 8)) &&\n                            square.row === fromSquare.row\n                        )\n                    })\n                    const rook = rookSquare.piece\n                    const moveRookTo = this.state.squares.find((availableSquare) => {\n                        return (\n                            availableSquare.row === rookSquare.row &&\n                            availableSquare.column === (rookSquare.column === 1 ? rookSquare.column + 3 : rookSquare.column - 2)\n                        )\n                    })\n                    moveRookTo.piece = rook\n                    rook.row = moveRookTo.row\n                    rook.column = moveRookTo.column\n                    rookSquare.piece = null\n                }\n                this.setState({ squares: this.state.squares, pieces: this.state.pieces, myTurn: true })\n                this.isCheckMate(this.props.location.state.color)\n            }\n        }\n    }\n\n    componentWillUnmount() {\n        // this.socket.send(JSON.stringify({\"type\":\"quit\",gameId: this.state.gameId}))\n        console.log(\"socket closed\")\n        this.socket.close()\n    }\n\n    listenForCheck = () => {\n        const king = this.state.squares.find((square) => {\n            return square.piece && square.piece.piece === 'king' && square.piece.color === this.props.location.state.color\n        })\n        const attackingPiece = this.state.squares.find((square) => {\n            return square.piece && checkMove(square.piece, square, king.piece, king, this.state.squares)\n        })\n        return (attackingPiece ? true : false)\n    }\n\n    isCheckMate = (color) => {\n        const isKingUnderAttack = this.listenForCheck()\n        if (isKingUnderAttack) {\n            this.setState({ kingInCheck: true })\n        }\n\n        const mySquares = this.state.squares.filter((square) => {\n            return square.piece && square.piece.color === color\n        })\n\n        const hero = mySquares.find((mySquare) => {\n            const destSquare = this.state.squares.find((square) => {\n                const movePossible = checkMove(mySquare.piece, mySquare, square.piece, square, this.state.squares, isKingUnderAttack)\n                if (movePossible) {\n                    var willPutInCheck = false\n                    const piece = square.piece\n                    if (piece) {\n                        piece.row = null\n                        piece.column = null\n                    }\n                    square.piece = mySquare.piece\n                    square.piece.row = square.row\n                    square.piece.column = square.column\n                    mySquare.piece = null\n                    const isCheck = this.listenForCheck()\n                    if (isCheck) {\n                        willPutInCheck = true\n                    }\n                    mySquare.piece = square.piece\n                    square.piece = piece\n                    mySquare.piece.row = mySquare.row\n                    mySquare.piece.column = mySquare.column\n                    if (piece) {\n                        piece.row = square.row\n                        piece.column = square.column\n                    }\n                    return !willPutInCheck\n                }\n                return false\n            })\n            return (destSquare ? true : false)\n        })\n        if (isKingUnderAttack && !hero) {\n            this.setState({ kingInCheckMate: true })\n            this.socket.send(JSON.stringify({ 'type': 'won', gameId: this.state.gameId }))\n        }\n        else if (!isKingUnderAttack && !hero) {\n            this.setState({ kingInStaleMate: true })\n            this.socket.send(JSON.stringify({ 'type': 'draw', gameId: this.state.gameId }))\n        }\n    }\n\n    move = (selectedPiece, selectedSquare, piece, square) => {\n        this.setState({ willPutKingInCheck: false })\n        const movePossible = checkMove(selectedPiece, selectedSquare, piece, square, this.state.squares, this.state.kingInCheck)\n        if (movePossible) {\n            square.piece = selectedPiece\n            selectedPiece.row = square.row\n            selectedPiece.column = square.column\n            if (piece) {\n                this.state.myPiecesCaptured.push(piece.icon)\n                piece.row = null\n                piece.column = null\n            }\n            selectedSquare.piece = null\n            const isCheck = this.listenForCheck()\n            if (isCheck) {\n                square.piece = piece\n                selectedPiece.row = selectedSquare.row\n                selectedPiece.column = selectedSquare.column\n                if (piece) {\n                    piece.row = square.row\n                    piece.column = square.column\n                }\n                selectedSquare.piece = selectedPiece\n                this.setState({ willPutKingInCheck: true })\n            }\n            else {\n                if (selectedPiece.piece === 'rook' || selectedPiece.piece === 'pawn' || selectedPiece.piece === 'king') {\n                    selectedPiece.hasMoved = true\n                }\n                var isCastling = false\n                if (selectedSquare.isCastling) {\n                    const rookSquare = this.state.squares.find((availableSquare) => {\n                        return availableSquare.isCastling && availableSquare.piece && availableSquare.piece.piece === 'rook'\n                    })\n                    const rook = rookSquare.piece\n                    const moveRookTo = this.state.squares.find((availableSquare) => {\n                        return (\n                            availableSquare.row === rookSquare.row &&\n                            availableSquare.column === (rookSquare.column === 1 ? rookSquare.column + 3 : rookSquare.column - 2)\n                        )\n                    })\n                    moveRookTo.piece = rook\n                    rook.row = moveRookTo.row\n                    rook.column = moveRookTo.column\n                    rookSquare.piece = null\n                    rook.hasMoved = true\n                    rookSquare.isCastling = false\n                    selectedSquare.isCastling = false\n                    isCastling = true\n                }\n                if (this.state.kingInCheck) {\n                    this.setState({ kingInCheck: false })\n                }\n                if (selectedPiece.piece === 'pawn' && square.row === (this.props.location.state.color === 'white' ? 1 : 8)) {\n                    this.setState({ showPieceSwapModal: true, squareToSwap: square, squareFromSwap: selectedSquare })\n                }\n                else {\n                    this.socket.send(JSON.stringify({ type: \"move\", gameId: this.state.gameId, fromSquare: { row: selectedSquare.row, column: selectedSquare.column }, isCastling: isCastling, toSquare: { row: square.row, column: square.column }, myColor: this.props.location.state.color }))\n                }\n                this.setState({ myTurn: false })\n                selectedPiece.selected = false\n                selectedSquare.selected = false\n            }\n        }\n        selectedPiece.selected = false\n        selectedSquare.selected = false\n        this.setState(prevState => {\n            return {\n                ...prevState\n            };\n        });\n    }\n\n    selectPiece = (square, piece) => {\n        square.selected = true\n        piece.selected = true\n        this.setState(this.state)\n    }\n\n    swapPiece = (pieceImage, index) => {\n        const square = this.state.squareToSwap\n        const fromSquare = this.state.squareFromSwap\n        const pawn = square.piece\n        pawn.row = null\n        pawn.column = null\n        const pieceType = ['queen', 'bishop', 'knight', 'rook']\n        const piece = new ChessPiece(pieceType[index], this.props.location.state.color, square.row, square.column, pieceImage)\n        square.piece = piece\n        piece.row = square.row\n        piece.column = square.column\n        const pieces = this.state.pieces\n        pieces.push(piece)\n        this.setState({ pieces: pieces, squares: this.state.squares });\n        this.hide()\n        this.socket.send(JSON.stringify({ type: \"swap\", gameId: this.state.gameId, index: index, toSquare: { row: square.row, column: square.column },  fromSquare: { row: fromSquare.row, column: fromSquare.column }, myColor: this.props.location.state.color }))\n    }\n\n    render() {\n        const pieceArray = this.props.location.state.color === 'white' ? [whiteQueen, whiteBishop, whiteKnight, whiteRook] :\n            [blackQueen, blackBishop, blackKnight, blackRook]\n\n        const myName = this.props.location.state.player2 ? this.props.location.state.userId : 'You'\n        const opponentName = this.props.location.state.player2 ? this.props.location.state.player2 : 'Opponent'\n\n        return (\n            <div>\n                {this.state.redirect ? <Redirect to=\"/home\" /> : null}\n\n                <div style={{position: 'fixed', left: '2%', top: '2%'}}>\n                    <Image src={home} roundedCircle width=\"100\" height=\"100\" onClick={this.redirect} style={{cursor: 'pointer'}} />\n                </div>\n                <div style={{ width: '20%', position: 'fixed', right: '2%', top: '75%' }}>\n\n                    <fieldset>\n                        <legend style={{ width: 'auto' }}>\n                            <Image src={this.props.user.imageUrl} roundedCircle width=\"60\" height=\"60\" /><span style={{ fontFamily: 'Rouge Script, cursive' }}>{this.props.user.username} </span>\n                        </legend>\n                        {this.state.myPiecesCaptured.length > 0 ? \n                        (\n                            this.state.myPiecesCaptured.map((piece) => {\n                                return (\n                                    <Image src={piece} roundedCircle width=\"30\" height=\"30\" />\n                                )\n                            })\n                        )\n                        : <div style={{color:'rgba(1,1,1,0.3)'}}>Pieces captured</div>\n                        }\n\n                    </fieldset>\n\n\n                </div>\n                <div style={{ width: '20%', position: 'fixed', right: '2%', top: '5%' }}>\n\n                    <fieldset>\n                        <legend style={{ width: 'auto' }}>\n                            <Image src={this.props.location.state.opponentImageUrl} roundedCircle width=\"60\" height=\"60\" /><span style={{ fontFamily: 'Rouge Script, cursive' }}>{this.props.location.state.opponentName} </span>\n                        </legend>\n\n                        {this.state.opponentPiecesCaptured.length > 0 ? \n                        (\n                            this.state.opponentPiecesCaptured.map((piece) => {\n                                return (\n                                    <Image src={piece} roundedCircle width=\"30\" height=\"30\" />\n                                )\n                            })\n                        )\n                        : <div style={{color:'rgba(1,1,1,0.3)'}}>Pieces captured</div>\n                        }\n\n\n                    </fieldset>\n\n\n                </div>\n\n                <div className=\"Game\">\n                    <div className=\"Board\">\n                        <Square\n                            squares={this.state.squares}\n                            move={this.move}\n                            pieces={this.state.pieces}\n                            myTurn={this.state.myTurn}\n                        />\n                        <Piece\n                            pieces={this.state.pieces}\n                            squares={this.state.squares}\n                            move={this.move}\n                            selectPiece={this.selectPiece}\n                            myTurn={this.state.myTurn}\n                            color={this.props.location.state.color}\n                        />\n                    </div>\n                </div>\n\n                <Modal backdrop=\"static\"\n                    aria-labelledby=\"contained-modal-title-vcenter\"\n                    centered\n                    keyboard={false}\n                    show={this.state.showQuitModal || this.state.kingInCheckMate || this.state.draw || this.state.won}\n                    onHide={this.hide}\n                    className=\"my-modal\"\n                    size=\"lg\"\n                >\n                    <Modal.Header closeButton hidden=\"true\"></Modal.Header>\n                    <Modal.Body>\n                        <div style={{ textAlign: \"center\" }}>\n                            <h4>{'GAME OVER!' + (this.state.showQuitModal ? ' Opponent Quit' : (this.state.kingInCheckMate ? ' Your King has been captured' : (this.state.draw ? ' DRAW' : ' YOU WON !!')))}</h4>\n                            <Button onClick={this.redirect} className='button' style={{ backgroundColor: 'black', border: '1px solid black', width: '150px', marginTop: '20px' }}>HOME</Button>\n                        </div>\n                    </Modal.Body>\n                </Modal>\n\n                <Modal backdrop=\"static\"\n                    aria-labelledby=\"contained-modal-title-vcenter\"\n                    centered\n                    keyboard={false}\n                    show={this.state.showPieceSwapModal}\n                    onHide={this.hide}\n                    className=\"my-modal\"\n                    size=\"lg\"\n                >\n                    <Modal.Header closeButton hidden=\"true\"></Modal.Header>\n                    <Modal.Body>\n                        <div style={{ textAlign: \"center\" }}>\n                            <h4>Select the piece to swap</h4>\n                            {\n                                pieceArray.map((piece, index) => {\n                                    return (\n                                        <span style={{\n                                            display: 'inline-block',\n                                            height: '20vh',\n                                            width: '20vh',\n                                            border: '3px solid black'\n                                        }} onClick={() => this.swapPiece(piece, index)}>\n                                            <img style={{ height: '20vh' }} src={piece} alt=\"piece\" />\n                                        </span>\n                                    )\n                                })\n                            }\n                        </div>\n                    </Modal.Body>\n                </Modal>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    socket: state.websocketReducer.socket,\n    user: state.userReducer\n})\n\nexport default connect(mapStateToProps)(ChessGame)"]},"metadata":{},"sourceType":"module"}