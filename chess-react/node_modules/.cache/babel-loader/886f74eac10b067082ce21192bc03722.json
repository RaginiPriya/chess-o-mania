{"ast":null,"code":"import _classCallCheck from\"/Users/ragir/Documents/chess/chess api/chess-online/chess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ragir/Documents/chess/chess api/chess-online/chess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ragir/Documents/chess/chess api/chess-online/chess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ragir/Documents/chess/chess api/chess-online/chess-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import{Redirect}from'react-router-dom';import{get}from'./RestService';import{API_BASE_URL}from'./constants';var OAuth2RedirectHandler=/*#__PURE__*/function(_Component){_inherits(OAuth2RedirectHandler,_Component);var _super=_createSuper(OAuth2RedirectHandler);function OAuth2RedirectHandler(){_classCallCheck(this,OAuth2RedirectHandler);return _super.apply(this,arguments);}_createClass(OAuth2RedirectHandler,[{key:\"getToken\",value:function getToken(){var query=new URLSearchParams(this.props.location.search);var token=query.get('token');return token;}},{key:\"render\",value:function render(){var token=this.getToken();if(token){this.props.setUser({token:token});// fetch(API_BASE_URL+'/user', {\n//     method: 'GET',\n//     headers: {\n//       'Authorization': 'Bearer ' + token,\n//     }\n// })\n//     .then((response) => {\n//         return response.json()\n//     })\n//     .then((data) => {\n//         console.log(data)\n//         this.props.setUser({token:token, username: data.name, imageUrl: data.imageUrl, id: data.id})\n//     })\nreturn/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/home'}});}else{return/*#__PURE__*/React.createElement(Redirect,{to:{pathname:'/'}});}}}]);return OAuth2RedirectHandler;}(Component);var mapDispatchToProps=function mapDispatchToProps(dispatch){return{setUser:function setUser(data){var action={type:'SET_USER',payload:data};return dispatch(action);}};};export default connect(null,mapDispatchToProps)(OAuth2RedirectHandler);","map":{"version":3,"sources":["/Users/ragir/Documents/chess/chess api/chess-online/chess-react/src/OAuth2RedirectHandler.js"],"names":["React","Component","connect","Redirect","get","API_BASE_URL","OAuth2RedirectHandler","query","URLSearchParams","props","location","search","token","getToken","setUser","pathname","mapDispatchToProps","dispatch","data","action","type","payload"],"mappings":"wsBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CACA,OAASC,QAAT,KAAyB,kBAAzB,CACA,OAAQC,GAAR,KAAkB,eAAlB,CACA,OAAQC,YAAR,KAA2B,aAA3B,C,GAEMC,CAAAA,qB,6TAEQ,CACN,GAAMC,CAAAA,KAAK,CAAG,GAAIC,CAAAA,eAAJ,CAAoB,KAAKC,KAAL,CAAWC,QAAX,CAAoBC,MAAxC,CAAd,CACA,GAAMC,CAAAA,KAAK,CAAGL,KAAK,CAACH,GAAN,CAAU,OAAV,CAAd,CACA,MAAOQ,CAAAA,KAAP,CACH,C,uCAEQ,CACL,GAAMA,CAAAA,KAAK,CAAG,KAAKC,QAAL,EAAd,CACA,GAAGD,KAAH,CAAS,CACL,KAAKH,KAAL,CAAWK,OAAX,CAAmB,CAACF,KAAK,CAACA,KAAP,CAAnB,EACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,mBACI,oBAAC,QAAD,EAAU,EAAE,CAAE,CACVG,QAAQ,CAAE,OADA,CAAd,EADJ,CAKH,CArBD,IAsBK,CACD,mBAAO,oBAAC,QAAD,EAAU,EAAE,CAAE,CACjBA,QAAQ,CAAE,GADO,CAAd,EAAP,CAGH,CAEJ,C,mCAtC+Bd,S,EAyCpC,GAAMe,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,QAAe,CACtCH,OAAO,CAAE,iBAACI,IAAD,CAAU,CACf,GAAMC,CAAAA,MAAM,CAAG,CACXC,IAAI,CAAE,UADK,CAEXC,OAAO,CAAEH,IAFE,CAAf,CAIA,MAAOD,CAAAA,QAAQ,CAACE,MAAD,CAAf,CACH,CAPqC,CAAf,EAA3B,CAUA,cAAejB,CAAAA,OAAO,CAAC,IAAD,CAAOc,kBAAP,CAAP,CAAkCV,qBAAlC,CAAf","sourcesContent":["import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { Redirect } from 'react-router-dom'\nimport {get} from './RestService'\nimport {API_BASE_URL} from './constants'\n\nclass OAuth2RedirectHandler extends Component {\n\n    getToken(){\n        const query = new URLSearchParams(this.props.location.search);\n        const token = query.get('token')\n        return token\n    }\n\n    render() {\n        const token = this.getToken();\n        if(token){\n            this.props.setUser({token:token})\n            // fetch(API_BASE_URL+'/user', {\n            //     method: 'GET',\n            //     headers: {\n            //       'Authorization': 'Bearer ' + token,\n            //     }\n            // })\n            //     .then((response) => {\n            //         return response.json()\n            //     })\n            //     .then((data) => {\n            //         console.log(data)\n            //         this.props.setUser({token:token, username: data.name, imageUrl: data.imageUrl, id: data.id})\n            //     })\n            \n            return (\n                <Redirect to={{\n                    pathname: '/home',\n                }} />\n            )\n        }\n        else {\n            return <Redirect to={{\n                pathname: '/'\n            }} />\n        }\n        \n    }\n}\n\nconst mapDispatchToProps = (dispatch) => ({\n    setUser: (data) => {\n        const action = {\n            type: 'SET_USER',\n            payload: data\n        }\n        return dispatch(action)\n    } \n})\n\nexport default connect(null, mapDispatchToProps)(OAuth2RedirectHandler)"]},"metadata":{},"sourceType":"module"}